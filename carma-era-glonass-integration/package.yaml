name:        carma-era-glonass-integration
version:     1.0.0.0
license:     BSD3
author:      Viacheslav Lotsmanov
maintainer:  <lotsmanov89@gmail.com>
category:    Web
synopsis:    Integration between CaRMa and Era Glonass microservice

description:
  Integration between CaRMa and Era Glonass microservice.
  .
  It provides proper API to handle everything realted to this integration.

dependencies:
  - aeson
  - attoparsec
  - base
  - bytestring
  - carma-monads
  - carma-utils
  - configurator
  - containers
  - directory
  - exceptions
  - http-api-data
  - http-client
  - http-client-tls
  - monad-logger
  - MonadRandom
  - mtl
  - pureMD5
  - qm-interpolated-string
  - servant
  - servant-client
  - servant-server
  - servant-swagger
  - swagger2
  - text
  - time
  - transformers
  - warp

ghc-options:
  - -Wall
  - -Werror
  - -O2
  - -funbox-strict-fields

library:
  source-dirs: src

executables:
  carma-era-glonass-integration:
    source-dirs: app
    main: Main.hs
    dependencies: [carma-era-glonass-integration]
    ghc-options: [-threaded]

tests:
  # "carma-era-glonass-integration" server must be run to simulate request.
  # It simulates request from Era Glonass' side.
  carma-era-glonass-integration-simulate-create-call-card:
    source-dirs: test
    main: SimulateCreateCallCard.hs
    dependencies:
      - carma-era-glonass-integration

  carma-era-glonass-integration-utils:
    source-dirs: test
    main: Utils.hs
    dependencies:
      - carma-era-glonass-integration
      - hspec
      - random

  carma-era-glonass-integration-types:
    source-dirs: test
    main: Types.hs
    dependencies:
      - carma-era-glonass-integration
      - hspec
