<div class="row-fluid">
  <div id="search-results" class="span9">
    <table id="tbl" class="table table-striped table-bordered">
      <thead>
        <tr>
          <th data-bind="expandAll: $data">
          </th>
          <!-- ko foreach: showFields.fields -->
          <th>
            <button class="btn btn-link"
                    data-bind="text: $root.showFields.labels[$data], sort: name">
            </button>
          </th>
          <!-- /ko -->
        </tr>
      </thead>
      <tbody data-bind="foreach: {data: kvms, as: 'kvm'}">
        <tr>
          <td class="expand-contoller" data-bind="expand: kvm">
          </td>
          <!-- ko foreach: $root.showFields.fields -->
          <td data-bind="renderGroup: $parent">
          </td>
          <!-- /ko -->
        </tr>
        <tr class="hidden">
          <td data-bind="attr: {colspan: $root.showFields.fields().length + 1}">
            <dl data-bind="eachNonEmpty: $root.showFields.hidden">
                <dt data-bind="text: $root.showFields.labels[$data]"></dt>
                <dd style="font-size: 16.25px; font-weight: 300; line-height: 1.25;"
                    data-bind="renderGroup: $parent"></dd>
            </dl>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="span3">
    <div id="search-conditions"
         data-bind="foreach: kvm.showFields">
      <div data-bind="renderField: $data" />
    </div>
    <div id="show-field"
         data-bind="renderField: f" />
  </div>
</div>
<div class="row-fluid">
  <div class="pager span9">
    <ul>
      <li data-bind="css: {disabled: !_.isNumber(prev())}">
        <a data-bind="click: prevPage">
          &larr;
        </a>
      </li>
      <li>
        <a data-bind="text: page">
        </a>
      </li>
      <li data-bind="css: {disabled: !next()}">
        <a data-bind="click: nextPage">
          &rarr;
        </a>
      </li>
    </ul>
  </div>
</div>
<script type="text/template" id="search-wrap-template">
  <div class="row-fluid">
    <div class="span1" data-bind="click: function () { kvm.showFields.del(fld) }" >
      <label><i class="icon-remove"></i></label>
    </div>
    <div class="content span11" data-bind="with: kvm">
    </div>
  </div>
</script>

<script type="text/template" id="group-ro-template">
  <div data-bind="foreach: fields" >
    <div data-bind="render: $data" />
  </div>
</script>

<script type="text/template" id="dictionary-ro-template">
  <span data-bind="text: kvm[field.name + 'Local']" />
</script>

<script type="text/template" id="text-ro-template">
  <span data-bind="text: kvm[field.name]" />
</script>

<script type="text/template" id="checkbox-ro-template">
  <span data-bind="text: kvm[field.name]() ? 'âœ“' : ''" />
</script>

<script type="text/template" id="ident-ro-template">
  <a data-bind="attr: {
                href: urlFor(kvm, field.name)
                },
                text: kvm[field.name]()
                " />
</script>

<script type="text/template" id="datetime-ro-template">
  <span data-bind="text: kvm[field.name]()" />
</script>

<script type="text/template" id="phone-ro-template">
  <span data-bind="text: kvm[field.name]()" />
</script>
