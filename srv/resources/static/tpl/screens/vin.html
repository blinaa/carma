<!-- VIN import screen -->
<div id="vin-form">
  <div class="central-form">
    <fieldset>
      <legend>Загрузка VIN</legend>
      <form id="vin-import-form" class="form-horizontal">
        <div class="control-group">
          <label class="control-label" for="vin-subprogram-select">
            Подпрограмма
          </label>
          <div class="controls">
            <select id="vin-subprogram-select" data-bind="foreach: $data">
              <option data-bind="value: value, text: label" />
            </select>
          </div>
        </div>

        <div class="control-group">
          <label class="control-label" for="vin-format-select">
            Формат
          </label>
          <div class="controls">
            <select id="vin-format-select" data-bind="foreach: $data">
              <option data-bind="value: value, text: label" />
            </select>
          </div>
        </div>

        <div class="control-group">
          <label class="control-label" for="vin-upload-file">
            Файл
          </label>
          <div class="controls">
            <input type="file" id="vin-upload-file" accept="text/csv" />
          </div>
        </div>

        <div class="controls">
          <!-- TODO Found out how to use button here without causing
               weird shit -->
          <a class="btn btn-primary" id="vin-send">
            <i class="icon icon-upload icon-white" />&nbsp;Загрузить
          </a>
        </div>
      </form>
    </fieldset>
    <fieldset>
       <div id="vin-box-container" />
    </fieldset>
  </div>
</div>

<script type="text/template"
        id="vin-box-template">
  <div class="alert alert-info vin-box">
    <button class="close" data-dismiss="alert">
      &times;
    </button>

    <div>
      <i class="icon icon-file" /><b data-bind="text: filename" />:
      <span data-bind="visible: !done()">
        обрабатывается <i class="icon-refresh icon-refresh-animate" />
      </span>

      <span data-bind="visible: resultMsg">
        <span data-bind="visible: fileUrls().length == 0">
          обработан без ошибок
        </span>
        <span data-bind="visible: fileUrls().length > 0">
          обработан, имеются ошибки
          (всего <span data-bind="text: bad" /><span
                       data-bind="foreach: fileUrls">:
            <a target="_blank" data-bind="attr: { href: $data }"><i
               class="icon icon-download-alt" /><b>отчёт</b></a></span>)
        </span>
      </span>

      <span data-bind="visible: errorMsg">
        критическая ошибка (<span data-bind="text: errorMsg" />)
      </span>
    </div>
</script>
